local HttpService = game:GetService("HttpService")

local function hookSensitiveFunctions()
    -- Định nghĩa các hàm hook để thay thế các hành vi mặc định
    local function hookedPrint(...)
        -- Không làm gì (ngăn chặn việc in ra console)
        return
    end

    local function hookedWarn(...)
        -- Không làm gì (ngăn chặn việc cảnh báo)
        return
    end

    local function hookedError(...)
        -- Không làm gì (ngăn chặn việc báo lỗi)
        return
    end

    -- Hook các hàm print, warn và error
    hookfunction(print, hookedPrint)
    hookfunction(warn, hookedWarn)
    hookfunction(error, hookedError)
end

local function checkUIElements(parent)
    for _, element in pairs(parent:GetChildren()) do
        local elementName = string.lower(element.Name)
        if string.find(elementName, "http") then
            element:Destroy()
            game.Players.LocalPlayer:Kick("You Are Spying And Sabotaging Our Script, Please Turn It Off!")
            while true do task.wait() end
        end

        if (element:IsA("TextLabel") or element:IsA("TextButton") or element:IsA("TextBox") or element:IsA("Message")) then
            local elementText = string.lower(element.Text)
            if string.find(elementText, "http") then
                element:Destroy()
                game.Players.LocalPlayer:Kick("You Are Spying And Sabotaging Our Script, Please Turn It Off!")
                while true do task.wait() end
            end
        end
    end
end

local function monitorCoreGui()
    while true do
        checkUIElements(game:GetService("CoreGui"))
        task.wait(1)  
    end
end

local function monitorNewPlayerGui()
    game:GetService("Players").PlayerAdded:Connect(function(player)
        player.ChildAdded:Connect(function(child)
            if child:IsA("ScreenGui") then
                checkUIElements(child)
            end
        end)
    end)
end

local function monitorScripts()
    for _, script in pairs(game:GetDescendants()) do
        if script:IsA("Script") or script:IsA("LocalScript") then
            local scriptSource = script.Source
            if string.find(scriptSource, "HttpService:GetAsync") or string.find(scriptSource, "HttpService:PostAsync") then
                game.Players.LocalPlayer:Kick("You Are Spying And Sabotaging Our Script, Please Turn It Off! HTTP Request Detected in Script!")
                while true do task.wait() end
            end
        end
    end
end

local function monitorModules()
    for _, module in pairs(game:GetService("ReplicatedStorage"):GetChildren()) do
        if module:IsA("ModuleScript") then
            local moduleSource = module.Source
            if string.find(moduleSource, "HttpService:GetAsync") or string.find(moduleSource, "HttpService:PostAsync") then
                game.Players.LocalPlayer:Kick("You Are Spying And Sabotaging Our Script, Please Turn It Off! HTTP Request Detected in Module!")
                while true do task.wait() end
            end
        end
    end
end

local function monitorRemoteEvents()
    local function detectHttpInMessage(message)
        if string.find(message, "http") then
            game.Players.LocalPlayer:Kick("You Are Spying And Sabotaging Our Script, Please Turn It Off! HTTP Detected in RemoteEvent!")
            while true do task.wait() end
        end
    end

    for _, remote in pairs(game:GetService("ReplicatedStorage"):GetChildren()) do
        if remote:IsA("RemoteEvent") or remote:IsA("RemoteFunction") then
            remote.OnServerEvent:Connect(function(player, message)
                detectHttpInMessage(message)
            end)
        end
    end
end

spawn(function()
    -- Gọi hàm hook trước khi bắt đầu kiểm tra các thành phần khác
    hookSensitiveFunctions()
    
    monitorCoreGui()  
    monitorNewPlayerGui()  
    monitorScripts()  
    monitorModules()  
    monitorRemoteEvents() 
end)
